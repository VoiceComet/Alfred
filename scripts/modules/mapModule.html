<!--input id="alfredMapInput" type="text" placeholder="Search"-->
<div id="alfredMap" style="height:100%"></div>
<script type="text/javascript">
var alfredMap;
/** @type google.maps.Marker[] */
var alfredMapMarkers = [];
var alfredMapMarkerLabels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'; //EIOU difficult to understand?


//noinspection JSUnusedLocalSymbols
/**
 * callback of script loading
 */
function initAlfredMap() {
    alfredMap = new google.maps.Map(document.getElementById("alfredMap"), {
        center: {lat: 52.5197, lng: 13.4051},
        zoom: 10
    });
    //searchLocationOnAlfredMap("Berlin Store");
}

/**
 * set a marker on the map
 * @param {google.maps.places.PlaceResult} place - marker place
 */
function createMarker(place) {
    alfredMapMarkers.push(new google.maps.Marker({
        map: alfredMap,
        label: alfredMapMarkerLabels[alfredMapMarkers.length % alfredMapMarkerLabels.length],
        position: place.geometry.location
    }));
}

//noinspection JSUnusedLocalSymbols
/**
 * search and show locations on the map
 * @param {String} query - search text
 */
function searchLocationOnAlfredMap(query) {
    var service = new google.maps.places.PlacesService(alfredMap);

    service.textSearch(
        {query: query},
        function(results, status) {
            var bounds = new google.maps.LatLngBounds();

            if (status === google.maps.places.PlacesServiceStatus.OK) {
                //console.log(results);
                if (results.length > 0) {
                    //clear markers
                    alfredMapMarkers.forEach(function(marker) {
                        marker.setMap(null);
                    });
                    alfredMapMarkers = [];

                    //create new markers
                    for (var i = 0; i < results.length; i++) {
                        createMarker(results[i]);

                        //set bounds
                        if (results[i].geometry.viewport) {
                            //only for geo codes
                            bounds.union(results[i].geometry.viewport);
                        } else {
                            bounds.extend(results[i].geometry.location);
                        }
                    }

                    //arrange map that all results are shown
                    alfredMap.fitBounds(bounds);

                    showMessage({content: results.length + ' results for "' + query + '"'})
                } else {
                    //nothing found
                    showMessage({content:'"' + query + '" not found'})
                }
            }
        }
    );
}

</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAD-XJsCGm_N1cAfYeuTwgsiFp0iWgcAi0&libraries=places&callback=initAlfredMap"></script>